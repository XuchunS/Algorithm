## LCA （最近公共祖先）

### 1. 向上标记法

基本思路：对于求x， y的最近公共祖先。

- 从x开始向上访问直到根节点，期间标记每个访问到的节点。
- 从y开始向上访问直到根节点，期间遇到的第一个被标记的节点极为 最近公共祖先。



### 2. 倍增法 （Online）

类似于二进制拼凑的思路。

两个数组

- depth： 每个节点距离根节点的深度。
- fa[i, j]: 节点 i 向上 走 2^j 步所能到达的节点。

算法流程：

```
1. 先将两个点同步到同一高度。
2. 同时向上跳，直到两个点的相遇。
```

### 3. Tarjan算法（Offline）

树中的点被分为三类：

- 0，即代表还没有被访问到的点。
- 1，即正在被访问的点。
- 2，已经被回溯的点。